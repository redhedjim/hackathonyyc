<!DOCTYPE html>
<html>
  <head>

    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.0/angular.min.js"></script>
    <script src="https://cdn.socket.io/socket.io-1.3.5.js">//npm install socket.io</script>  
    <!--script src="node_modules/angular-socket-io/socket.js"></script-->


	<script>



		//var app = angular.module("myApp", ['btford.socket-io'])
		var app = angular.module("myApp", [])
		
		.factory('socketIO', function () {

  			var socket = io("https://xfactoryyc.herokuapp.com");
  			//var socket = io("localhost:1337");  // Use for localhost
  			return socket;
		});

		app.controller("myCtrl", function($scope, socketIO) {
		    $scope.myString = "Hello";
		    

		    $scope.emit = function() {
		    	alert("send hello");
		    	socketIO.emit('sendMsg', $scope.myString);	
		    }
		    
		    socketIO.on('receiveMsg', function(ret) {
		    	$scope.$apply(function(){
		    		$scope.myString = $scope.myString + " " + ret;
		    	});
		    });
      
		});
	</script>

  </head>

  <body>

  	<div ng-app="myApp" ng-controller="myCtrl">
    	<h1>X-Factor YYC11</h1>
    	<p>{{myString}}</p>
    	<button type="button" ng-click="emit();">Send Msg</button>
    </div>

  </body>
</html>